<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sliverlink</title>
    <link rel="stylesheet" href="/css/stylese.css">
</head>
<body>
    <header class="header">
      <h1><a href="http://localhost:3000/mainPage/mainNode">sliverlink</a></h1>
    </header>
    <nav>
        <ul>
          <li><a href="http://localhost:3000/refinesearch/se">복지혜택 검색</a></li>
          <li><a href="http://localhost:3000/community/community">커뮤니티 기능</a></li>
          <li><a href="http://localhost:3000/recommend/recommendPage">맞춤형 추천 받기</a></li>
          <li><a href="#">이벤트</a></li>
          <li><a href="#">고객센터 문의하기</a></li>
          <button id="loginButton" >로그인</button>
        </ul>
    </nav>
    
    <div class="small">
      • 복지혜택 검색 &gt; <span>세분화 검색</span>
  </div>

  <div class="big">
      세분화 검색
  </div>

  

  <div class="container">
    <div class="row">
      <div class="text">지역</div>
      <div class="select-wrapper ">
        <select class="dropdown1" id="region1" onclick="serchRegion(this.value);">
          <option value="all">시/도</option>
        </select>
      </div>
      <div class="select-wrapper ">
        <select class="dropdown2" id="region2">
          <option value="">구/동</option>
        </select>
      </div>
      <div class="text institution-name">기관명</div>
      <div class="select-wrapper">
        <select class="dropdown3" id="puInstitution1">
          <option value="all">선택하세요</option>
          <option value="all">지자체</option>
          <option value="고용노동부 고령사회인력정책과">고용노동부 고령사회인력정책과</option>
          <option value="교육부 평생학습지원과">교육부 평생학습지원과</option>
          <option value="국가보훈부 보상정책과">국가보훈부 보상정책과</option>
          <option value="국가보훈부 복지정책과">국가보훈부 복지정책과</option>
          <option value="국토교통부 공공주택정책과">국토교통부 공공주택정책과</option>
          <option value="국토교통부 광역교통경제과">국토교통부 광역교통경제과</option>
          <option value="국토교통부 주택기금과">국토교통부 주택기금과</option>
          <option value="금융위원회 금융정책과">금융위원회 금융정책과</option>
          <option value="문화체육관광부 도서관정책기획단">문화체육관광부 도서관정책기획단</option>
          <option value="문화체육관광부 지역문화정책과">문화체육관광부 지역문화정책과</option>
          <option value="보건복지부 건강정책과">보건복지부 건강정책과</option>
          <option value="보건복지부 건강증진과">보건복지부 건강증진과</option>
          <option value="보건복지부 국민연금정책과">보건복지부 국민연금정책과</option>
          <option value="보건복지부 기초연금과">보건복지부 기초연금과</option>
          <option value="보건복지부 기초의료보장과">보건복지부 기초의료보장과</option>
          <option value="보건복지부 노인건강과">보건복지부 노인건강과</option>
          <option value="보건복지부 노인정책과">보건복지부 노인정책과</option>
          <option value="보건복지부 노인지원과">보건복지부 노인지원과</option>
          <option value="보건복지부 요양보험제도과">보건복지부 요양보험제도과</option>
          <option value="보건복지부 장애인자립기반과">보건복지부 장애인자립기반과</option>
          <option value="보건복지부 질병정책과">보건복지부 질병정책과</option>
          <option value="산림청 산림자원과">산림청 산림자원과</option>
          <option value="중소벤처기업부 창업생태계과">중소벤처기업부 창업생태계과</option>
          <option value="질병관리청 예방접종관리과">질병관리청 예방접종관리과</option>
          <option value="통일부 교육기획과">통일부 교육기획과</option>
        </select>
      </div>
    </div>
  
    <div class="row">
      <div class="text">키워드</div>
      <div class="select-wrapper">
        <select class="dropdown4" id="serviceKey">
          <option value="all">선택하세요</option>
          <option value="보육">보육</option>
          <option value="다자녀">다자녀</option>
          <option value="입양·위탁">입양·위탁</option>
          <option value="지자체 복지서비스">지자체 복지서비스</option>
          <option value="보훈대상자">보훈대상자</option>
          <option value="법률">법률</option>
          <option value="안전·위기">안전·위기</option>
          <option value="문화·여가">문화·여가</option>
          <option value="정신건강">정신건강</option>
          <option value="보호·돌봄">보호·돌봄</option>
          <option value="생활지원">생활지원</option>
          <option value="서민금융">서민금융</option>
          <option value="저소득">저소득</option>
          <option value="장애인">장애인</option>
          <option value="한부모·조손">한부모·조손</option>
          <option value="교육">교육</option>
          <option value="일자리">일자리</option>
          <option value="신체건강">신체건강</option>
          <option value="임신·출산">임신·출산</option>
          <option value="영유아">영유아</option>
          <option value="아동">아동</option>
          <option value="중앙부처 복지사업">중앙부처 복지사업</option>
          <option value="다문화·탈북민">다문화·탈북민</option>
          <option value="주거">주거</option>
          <option value="청소년">청소년</option>
          <option value="청년">청년</option>
          <option value="중장년">중장년</option>
          <option value="노년">노년</option>          
        </select>
      </div>
      <div class="text institution-name">온라인신청여부</div>
      <div class="select-wrapper">
        <select class="dropdown5" id="online">
          <option value="all">선택하세요</option>
          <option value="true">예</option>
          <option value="false">아니오</option>
        </select>
      </div>
    </div>
  
    <div class="row">
      <div class="text">나이</div>
      <div class="select-wrapper">
        <select class="dropdown6" id="age">
          <option value="all">나이선택</option>
          <option value="1">40세 이상</option>
          <option value="2">60세 이상</option>
          <option value="3">80세 이상</option>
        </select>
      </div>
      <div class="text">성별</div>
      <div class="select-wrapper">
        <select class="dropdown7" id="gender">
          <option value="all">성별선택</option>
          <option value="all">남성</option>
          <option value="female">여성</option>
        </select>
      </div>
      <!-- <div class="text">기타</div>
      <div class="select-wrapper">
        <select class="dropdown8">
          <option value=""></option>
          <option value="1">기타</option>
          <option value="2">통기타</option>
          <option value="3">비타민</option>
        </select>
      </div> -->
    </div>
    

    <br><br>

    <div class="button-container">
      <button onclick="search();" class="search" id="testsearch"> 검색 </button>
      <button class="reset" onclick="reset();">초기화</button>
    </div>

  </div>
  
  <div class="result">
    총 1건의 검색결과가 있습니다.
  </div>
  <div class="divider"></div>

<div class="small-box">
  <p class="small-text"><strong>노인 맞춤 돌봄 서비스</strong><br><br>
  일상생활 영위가 어려운 취약 노인에게 적절한 돌봄 서비스를 제공합니다<br><br></p>
  <div class="button-small">
    <button class="details">자세히</button>
    <button class="application">신청</button>
  </div>
</div>

<ul id="result-list"></ul>

</body>
</html>

<script>
  var area = {
            "서울특별시" : [ "강남구", "강동구", "강북구", "강서구", "관악구", "광진구", "구로구", "금천구", "노원구", "도봉구", "동대문구", "동작구", "마포구", "서대문구", "서초구", "성동구", "성북구", "송파구", "양천구", "영등포구", "용산구", "은평구", "종로구", "중구", "중랑구" ],
            "경기도" : [ "수원시", "성남시", "의정부시", "안양시", "부천시", "광명시", "평택시", "동두천시", "안산시", "안산시", "고양시", "고양시",
                "과천시", "구리시", "남양주시", "오산시", "시흥시", "군포시", "의왕시", "하남시", "용인시", "파주시", "이천시", "안성시", "김포시", "화성시", "광주시", "양주시", "포천시", "여주시", "연천군", "가평군", "양평군" ],
            "인천광역시" : [ "계양구", "미추홀구", "남동구", "동구", "부평구", "서구", "연수구", "중구", "강화군", "옹진군" ],
            "강원도" : [ "춘천시", "원주시", "강릉시", "동해시", "태백시", "속초시", "삼척시", "홍천군", "횡성군", "영월군", "평창군", "정선군", "철원군", "화천군", "양구군", "인제군", "고성군", "양양군" ],
            "충청북도" : [ "청주시", "충주시", "제천시", "보은군", "옥천군", "영동군", "증평군", "진천군", "괴산군", "음성군", "단양군" ],
            "충청남도" : [ "천안시", "공주시", "보령시", "아산시", "서산시", "논산시", "계룡시", "당진시", "금산군", "부여군", "서천군", "청양군", "홍성군", "예산군", "태안군" ],
            "대전광역시" : [ "대덕구", "동구", "서구", "유성구", "중구" ],
            "세종특별자치시" : [ "세종특별자치시" ],
            "전라북도" : [ "전주시", "군산시", "익산시", "정읍시", "남원시", "김제시", "완주군", "진안군", "무주군", "장수군", "임실군", "순창군", "고창군", "부안군" ],
            "전라남도" : [ "목포시", "여수시", "순천시", "나주시", "광양시", "담양군", "곡성군", "구례군", "고흥군", "보성군", "화순군", "장흥군", "강진군", "해남군", "영암군", "무안군", "함평군", "영광군", "장성군", "완도군", "진도군", "신안군" ],
            "광주광역시" : [ "광산구", "남구", "동구", "북구", "서구" ],
            "경상북도" : [ "포항시", "경주시", "김천시",, "안동시", "구미시", "영주시", "영천시", "상주시", "문경시", "경산시", "군위군", "의성군", "청송군", "영양군", "영덕군", "청도군", "고령군", "성주군", "칠곡군", "예천군", "봉화군", "울진군", "울릉군" ],
            "경상남도" : [ "창원시", "진주시", "통영시", "사천시", "김해시", "밀양시", "거제시", "양산시", "의령군", "함안군", "창녕군", "고성군", "남해군", "하동군", "산청군", "함양군", "거창군", "합천군" ],
            "부산광역시" : [ "강서구", "금정구", "남구", "동구", "동래구", "부산진구", "북구", "사상구", "사하구", "서구", "수영구", "연제구", "영도구", "중구", "해운대구", "기장군" ],
            "대구광역시" : [ "남구", "달서구", "동구", "북구", "서구", "수성구", "중구", "달성군" ],
            "울산광역시" : [ "남구", "동구", "북구", "중구", "울주군" ],
            "제주특별자치도" : [ "서귀포시", "제주시" ]
  }



  var region1Element = document.getElementById("region1")
  var region2Element = document.getElementById("region2")
  for(var key in area) {
    var option = document.createElement("option")
    option.text = key
    region1Element.append(option)
  }

  function serchRegion(e) {
    region2Element.innerHTML = "";
    var option = document.createElement("option")
    option.text = "구/동"
    region2Element.append(option)
    for(var key in area) {
      if(e == key) {
        area[key].forEach(element => {
          var option = document.createElement("option")
          option.text = element
          region2Element.append(option)
        });
      }
    }
  }

  function reset() {
    document.getElementById("region1").value = "all";
    document.getElementById("region2").value = "";
    document.getElementById("puInstitution1").value = "all";
    document.getElementById("serviceKey").value = "all";
    document.getElementById("online").value = "all";
    document.getElementById("age").value = "all";
    document.getElementById("gender").value = "all";
  }

 


  function search() {
    var region1 = document.getElementById("region1").value;
    var region2 = document.getElementById("region2").value;
    var puInstitution1 = document.getElementById("puInstitution1").value;
    var serviceKey = document.getElementById("serviceKey").value;
    var online = document.getElementById("online").value;
    var age = document.getElementById("age").value;
    var gender = document.getElementById("gender").value;
    // console.log(gender);  // deug

    

    const resultList = document.getElementById("result-list");
    resultList.innerHTML = "";
    
    fetch("se/search?region1=" + region1 + "&region2=" + region2 + "&puInstitution1=" + puInstitution1 + "&serviceKey=" + serviceKey + "&online=" + online + "&age=" + age + "&gender=" + gender)
    .then(response => response.json())
    .then(data => {
      resultList.innerHTML = "";
      data.forEach(element => {
        const li = document.createElement("li");
        li.innerHTML = element['idS'];
        resultList.append(li);
      });
    })
    .catch(error => console.error('Error:', error));
    
  }

  var id = document.getElementById("loginButton");
  if(window.sessionStorage.getItem("user") != null){
    id.innerHTML = "로그아웃";
    id.addEventListener('click', function() {
      window.sessionStorage.removeItem("user");
      location.href = "http://localhost:3000/mainPage/mainNode";
    });
  }
  else{
    id.innerHTML = "로그인";
    id.addEventListener('click', function() {
      location.href = "http://localhost:3000/login/login";
    });
  }

  

</script>
